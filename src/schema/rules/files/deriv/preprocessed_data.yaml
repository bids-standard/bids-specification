# This document implements the common derivatives specification,
# generally adding space and description entities to most raw data.
#
# Imaging files are generally omitted, due to redundancy with imaging.yaml
---
beh_noncontinuous_common:
  $ref:
    - meta.templates.deriv.base
    - rules.files.raw.beh.noncontinuous
  entities:
    $ref:
      - meta.templates.deriv.base.entities
      - rules.files.raw.beh.noncontinuous.entities

channels_channels_common:
  $ref:
    - meta.templates.deriv.base
    - rules.files.raw.channels.channels
  entities:
    $ref:
      - meta.templates.deriv.base.entities
      - rules.files.raw.channels.channels.entities

channels_channels__meg_common:
  $ref:
    - meta.templates.deriv.base
    - rules.files.raw.channels.channels__meg
  entities:
    $ref:
      - meta.templates.deriv.base.entities
      - rules.files.raw.channels.channels__meg.entities

channels_channels__motion_common:
  $ref:
    - meta.templates.deriv.base
    - rules.files.raw.channels.channels__motion
  entities:
    $ref:
      - meta.templates.deriv.base.entities
      - rules.files.raw.channels.channels__motion.entities

channels_coordsystem_common:
  $ref:
    - meta.templates.deriv.base
    - rules.files.raw.channels.coordsystem
  entities:
    $ref:
      - meta.templates.deriv.base.entities
      - rules.files.raw.channels.coordsystem.entities

channels_coordsystem__eeg_common:
  $ref:
    - meta.templates.deriv.base
    - rules.files.raw.channels.coordsystem__eeg
  entities:
    $ref:
      - meta.templates.deriv.base.entities
      - rules.files.raw.channels.coordsystem__eeg.entities

channels_electrodes_common:
  $ref:
    - meta.templates.deriv.base
    - rules.files.raw.channels.electrodes
  entities:
    $ref:
      - meta.templates.deriv.base.entities
      - rules.files.raw.channels.electrodes.entities

channels_electrodes__meg_common:
  $ref:
    - meta.templates.deriv.base
    - rules.files.raw.channels.electrodes__meg
  entities:
    $ref:
      - meta.templates.deriv.base.entities
      - rules.files.raw.channels.electrodes__meg.entities

channels_optodes_common:
  $ref:
    - meta.templates.deriv.base
    - rules.files.raw.channels.optodes
  entities:
    $ref:
      - meta.templates.deriv.base.entities
      - rules.files.raw.channels.optodes.entities

eeg_eeg_common:
  $ref:
    - meta.templates.deriv.spatial
    - rules.files.raw.eeg.eeg
  entities:
    $ref:
      - meta.templates.deriv.spatial.entities
      - rules.files.raw.eeg.eeg.entities

ieeg_ieeg_common:
  $ref:
    - meta.templates.deriv.spatial
    - rules.files.raw.ieeg.ieeg
  entities:
    $ref:
      - meta.templates.deriv.spatial.entities
      - rules.files.raw.ieeg.ieeg.entities

meg_meg_common:
  $ref:
    - meta.templates.deriv.spatial
    - rules.files.raw.meg.meg
  entities:
    $ref:
      - meta.templates.deriv.spatial.entities
      - rules.files.raw.meg.meg.entities

meg_calibration_common:
  $ref:
    - meta.templates.deriv.spatial
    - rules.files.raw.meg.calibration
  entities:
    $ref:
      - meta.templates.deriv.spatial.entities
      - rules.files.raw.meg.calibration.entities

meg_crosstalk_common:
  $ref:
    - meta.templates.deriv.spatial
    - rules.files.raw.meg.crosstalk
  entities:
    $ref:
      - meta.templates.deriv.spatial.entities
      - rules.files.raw.meg.crosstalk.entities

meg_headshape_common:
  $ref:
    - meta.templates.deriv.spatial
    - rules.files.raw.meg.headshape
  entities:
    $ref:
      - meta.templates.deriv.spatial.entities
      - rules.files.raw.meg.headshape.entities

meg_markers_common:
  $ref:
    - meta.templates.deriv.spatial
    - rules.files.raw.meg.markers
  entities:
    $ref:
      - meta.templates.deriv.spatial.entities
      - rules.files.raw.meg.markers.entities

micr_microscopy_common:
  $ref:
    - meta.templates.deriv.spatial
    - rules.files.raw.micr.microscopy
  selectors:
    - dataset.dataset_description.DatasetType == 'derivative'
  $ref: rules.files.raw.micr.microscopy
  entities:
    $ref: rules.files.raw.micr.microscopy.entities
    space: optional
    description: optional

perf_asl_common:
  selectors:
    - dataset.dataset_description.DatasetType == 'derivative'
  $ref: rules.files.raw.perf.asl
  entities:
    $ref: rules.files.raw.perf.asl.entities
    space: optional
    description: optional

pet_pet_common:
  selectors:
    - dataset.dataset_description.DatasetType == 'derivative'
  $ref: rules.files.raw.pet.pet
  entities:
    $ref:
      - meta.templates.deriv.spatial.entities
      - rules.files.raw.micr.microscopy.entities

pet_blood_common:
  $ref:
    - meta.templates.deriv.spatial
    - rules.files.raw.pet.blood
  entities:
    $ref:
      - meta.templates.deriv.spatial.entities
      - rules.files.raw.pet.blood.entities

task_events_common:
  $ref:
    - meta.templates.deriv.base
    - rules.files.raw.events.events
  entities:
    $ref:
      - meta.templates.deriv.base.entities
      - rules.files.raw.events.events.entities
