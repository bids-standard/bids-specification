---
channels:
  $ref: meta.templates.raw.task
  suffixes:
    - channels
  extensions:
    - .json
    - .tsv
  datatypes:
    - eeg
    - ieeg
    - nirs

# microephys has an additional 'sample' entity but excludes task/run
channels__microephys:
  $ref: rules.files.raw.channels.channels
  suffixes:
    - channels
  extensions:
    - .json
    - .tsv
  datatypes:
    - icephys
    - ecephys
  entities:
    subject: required
    session: optional
    sample: optional
    acquisition: optional

# MEG has an additional entity available
channels__meg:
  $ref: rules.files.raw.channels.channels
  datatypes:
    - meg
  entities:
    $ref: rules.files.raw.channels.channels.entities
    processing: optional

# motion has an additional entity available
channels__motion:
  $ref: rules.files.raw.channels.channels
  datatypes:
    - motion
  entities:
    $ref: rules.files.raw.channels.channels.entities
    tracksys: required

coordsystem:
  suffixes:
    - coordsystem
  extensions:
    - .json
  datatypes:
    - meg
    - nirs
  entities:
    $ref: meta.templates.raw.base.entities
    task: optional
    acquisition: optional

# (i)EEG has a space entity
coordsystem__eeg:
  $ref: rules.files.raw.channels.coordsystem
  datatypes:
    - eeg
    - ieeg
  entities:
    $ref: rules.files.raw.channels.coordsystem.entities
    space: optional

coordsystem_microephys:
  $ref: rules.files.raw.channels.coordsystem
  datatypes:
    - icephys
    - ecephys
  entities:
    $ref: rules.files.raw.channels.coordsystem.entities
    space: required

electrodes:
  suffixes:
    - electrodes
  extensions:
    - .json
    - .tsv
  datatypes:
    - eeg
    - ieeg
  entities:
    $ref: meta.templates.raw.recording.entities
    task: optional
    space: optional

# MEG has an additional entity available
electrodes__meg:
  $ref: rules.files.raw.channels.electrodes
  datatypes:
    - meg
  entities:
    $ref: rules.files.raw.channels.electrodes.entities
    processing: optional

# microephys electrodes exclude task/run entities
electrodes__microephys:
  $ref: rules.files.raw.channels.electrodes
  suffixes:
    - electrodes
  extensions:
    - .json
    - .tsv
  datatypes:
    - ecephys
    - icephys
  entities:
    subject: required
    session: optional
    sample: optional
    acquisition: optional
    processing: optional
    space: optional

optodes:
  suffixes:
    - optodes
  extensions:
    - .tsv
    - .json
  datatypes:
    - nirs
  entities:
    $ref: meta.templates.raw.base.entities
    acquisition: optional
