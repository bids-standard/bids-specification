#
# Groups of related metadata fields
#
# Assumptions: never need disjunction of selectors
# Assumptions: top-to-bottom overrides is sufficient logic

---
# Metadata for either physio or stim files
Continuous:
  selectors:
    - intersects([suffix], ["physio", "stim"])
  fields:
    SamplingFrequency: required
    StartTime: required
    Columns: required

# Other recommended metadata for physiological data
PhysioHardware:
  selectors:
    - suffix == "physio"
  fields:
    DeviceSerialNumber: recommended
    Manufacturer: recommended
    ManufacturersModelName: recommended
    SoftwareVersions: recommended

PhysioTypeRecommended:
  selectors:
    - suffix == "physio"
  fields:
    PhysioType: recommended

PhysioTypeRequired:
  selectors:
    # Avoid automated validation; this is for the sake of rendering a table.
    - false
  fields:
    PhysioType: required

PhysioEvents:
  selectors:
    - suffix == "physioevents"
  fields:
    Columns: required
    Description: recommended

# Eye-tracking
EyeTrack:
  selectors:
    - suffix == "physio"
    - sidecar.PhysioType == "eyetrack"
  fields:
    RecordedEye: required
    SampleCoordinateSystem: required
    AverageCalibrationError: recommended
    CalibrationCount: recommended
    CalibrationPosition: recommended
    CalibrationType: recommended
    CalibrationUnit: recommended
    EyeCameraSettings: recommended
    EyeTrackerDistance: recommended
    EyeTrackingMethod: recommended
    FeatureDetectionSettings: recommended
    GazeMappingSettings: recommended
    MaximalCalibrationError: recommended
    PupilFitMethod: recommended
    RawDataFilters: recommended
    ScreenAOIDefinition: recommended
