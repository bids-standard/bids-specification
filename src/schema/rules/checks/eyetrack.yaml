EyetrackingStimulusPresentation:
  issue:
    code: INCOMPLETE_STIMULUS_PRESENTATION
    level: error
    message: |
      `StimulusPresentation` metadata for the events file associated with {path}
      ({associations.events.path}) must have `ScreenDistance`, `ScreenOrigin`,
      `ScreenResolution` and `ScreenSize` fields.
  selectors:
    - suffix == 'physio'
    - extension == '.tsv.gz'
    - sidecar.PhysioType == 'eyetrack'
  checks:
    - '"ScreenDistance" in associations.events.sidecar.StimulusPresentation'
    - '"ScreenOrigin" in associations.events.sidecar.StimulusPresentation'
    - '"ScreenResolution" in associations.events.sidecar.StimulusPresentation'
    - '"ScreenSize" in associations.events.sidecar.StimulusPresentation'

ForeignColumnConsistency:
  issue:
    code: MISSING_FOREIGN_COLUMN
    level: error
    message: >
      The `physioevents.tsv.gz` file declared a `ForeignIndexColumn` of
      {sidecar.ForeignIndexColumn}, but no such column was found in
      {associations.physio.path}.
  selectors:
    - suffix == 'physioevents'
    - extension == '.tsv.gz'
    - sidecar.ForeignIndexColumn
  checks:
    - intersects([sidecar.ForeignIndexColumn], associations.physio.sidecar.Columns)
