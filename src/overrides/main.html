{% extends "base.html" %}

{% block content %}
  {{ super() }}

  <!-- Assistant widget -->
  <div class="assistant-container">
    <iframe class="assistant-iframe"></iframe>
  </div>
  <button class="assistant-toggle">Open Assistant</button>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const toggle = document.querySelector('.assistant-toggle');
      const container = document.querySelector('.assistant-container');
      const iframe = document.querySelector('.assistant-iframe');
      let iframeLoaded = false;

      toggle.addEventListener('click', function() {
        const isShowing = container.classList.toggle('show');

        // Load iframe content only when first opened
        if (isShowing && !iframeLoaded) {
          iframe.src = 'https://bids-assistant.neurosift.app/';
          iframeLoaded = true;
        }
      });
    });
  </script>
{% endblock %}
